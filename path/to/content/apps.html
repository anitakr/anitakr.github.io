<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        // Function to copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                console.log('Text successfully copied');
            }).catch(function(err) {
                console.error('Error in copying text: ', err);
            });
        }

        // Function to check for 'special' query parameter
        function hasSpecialQueryParam() {
            var params = new URLSearchParams(window.location.search);
            return params.has('special');
        }

        // Store a special code in local storage if 'special' query parameter is present
        function storeSpecialCode() {
            if (hasSpecialQueryParam()) {
                localStorage.setItem('specialCode', 'SPECIALDISCOUNT');
            }
        }

        // Call storeSpecialCode when the script loads
        storeSpecialCode();

        // Redirect to the App Store or Google Play based on the device
        // and copy to clipboard
        function redirectToAppStoreAndCopy(text, url) {
            copyToClipboard(text);
            window.location.href = url;
        }
    </script>
    <title>Download Our App</title>
    <!-- existing style -->
</head>
<body>
    <h1>Welcome to Our App!</h1>
    <p>Get the full experience by downloading our app.</p>

    <button onclick="redirectToAppStoreAndCopy('Your text to copy', 'https://apps.apple.com/app/1596077029')" class="button">Download on the App Store</button>
    <button onclick="redirectToAppStoreAndCopy('Your text to copy', 'https://testflight.apple.com/join/xNQd94zo')" class="button">Join Beta on TestFlight</button>
</body>
</html>
